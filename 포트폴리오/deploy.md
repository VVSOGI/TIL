드디어 첫 번째 배포가 완료되었다. 위에 스스로 줬던 과제는 알고리즘 공부 빼면 성공했다. 잠깐 기업 과제에 대해서 복기를 해보면, 리액트 네이티브와 평소에 사용했던 리액트는 아주 비슷하면서 살짝 달랐다. 그렇게 어렵지는 않았지만, 기업 과제에 통과하지는 못했다. 사실 조건에 만족하지 못하는 것이 하나 있었고, 미숙한 점들이 꽤 많이 보였었기에 그런 것 같다. 하지만 러닝커브 4일과 실제 작업 3일로 만든 결과물 치고는 나쁘지 않았다. 앱을 만드는 과정이 어떤 방식으로 이뤄져야 하는 지도 공부가 됐고, 개인적으로 발전할 수 있는 시간이었던 것 같다.

어쨋든 포트폴리오 사이트에 대해서 첫 번째 리뷰를 해보자면, 일단 만족스러운 결과물이 나온 것 같다. 물론 아직 반응형 웹을 구현하지 않아서 큰 화면에 밖에 적용이 안되는 반 쪽짜리 사이트긴 하지만 최초에 원했던 기능들이 잘 구현이 됬고, 중간 중간 튀어나오는 버그들도 2~3시간 안에 잡았다. 일단 첫 번째로 배포를 시도하기 위해서 깃헙의 호스팅 페이지를 이용하려 했다. 맥락을 읽었다면 아마 배포가 실패했다는 것을 알았을 것이다. 배포하는 과정에서 도메인에 이름이 잘 적용이 안되는 것 같았고, 크게 두 가지 문제가 보였는데 첫 번째로 구글에서 타겟 광고를 이용하기 위해서 제공하는 FLoC 기능에서 발생했던 것 같다. 이것을 깃헙측에서 아예 차단하는 것 같은데, 대체 해결할 수 있는 방법을 찾을 수 없었다. FLoC 기능을 차단하고 배포를 시도해봐도 전혀 먹히지 않았다. 이 부분에서 1시간 정도 삽질을 했다.

두 번째로, jQuery에서 문제가 생겼다. 풀 페이지 JS를 사용하기 위해서 오버라이딩을 했고, react-app-rewired를 이용해서 package.json의 스크립트를 동작했는데, 실제 빌드할 때는 그냥 react build를 했더니 문제가 생겼던 것 같다. 사실 이 문제가 아닐 수도 있지만, jQuery는 배포 전부터 이 부분에서 뭔가 문제가 생길 것 같은 느낌을 강하게 받았기 때문에 정확한 원인은 모르지만 추측으로는 그렇다. 사실 다 필요없고 이 부분만 문제가 없기를 기도했지만 결국 피해갈 수 없던 것 같다. 라이브러리를 사용하는 개발자에게 주어진 숙명이다.

이 순간에 결정을 내렸어야 했다. 제이쿼리 문제를 해결한다 해도, 과연 내가 깃헙의 플록 문제를 해결할 수 있을까? 깃헙과 구글의 고래싸움에 등 터지는 새우가 되는 것만은 피해야한다. 그래서 차선책으로 Netlify를 이용해서 배포하기로 결정했다. 예전에도 한 번 해본적이 있었고, 어렵지 않을 것이라는 생각이 들었다. 이제 Netlify를 이용한 결과가 어떻게 되었는 지 적어보겠다.

결과는 성공적이었다. 처음에 에러가 발생했지만, 이 에러는 최초에 내가 깃헙에 배포하기 위해서 package.json에 홈페이지를 작성해놓은 것이 원인 이었기 때문에 그 부분을 지운 다음에 react-app-rewired build를 하고, Netlify deploy를 다시 시도한 후에 제공해준 도메인에 접속을 해보니 내 포트폴리오가 아주 깔끔하게 잘 나오는 것을 확인했다. 그저 무한하게 감사할 수 밖에 없었다. 걱정했던 제이쿼리 문제도 스무스하게 넘어갔고, 누락되는 부분도 없이 잘 나왔다. 감사합니다 Netlify 선생님..!

이제 앞으로의 계획은 대부분이 반응형 웹을 구현하는 것에 있을 것 같다. 코드도 대부분 정리해놨으니 약 하루 이틀정도만 투자하면 될 것 같다. 그리고 반응형을 다 구현한 다음에 마지막 배포를 하면 완벽하게 나를 위한 포트폴리오 사이트가 만들어지는 것이다. 그럼 다 완성한 다음에 다시 글을 끄적이러 오겠다.

## Netlify redirect

NETLIFY 배포 시, 리다이렉트 주소를 설정하지 않으면 기존 도메인에서 벗어난 주소에서 새로고침을 하면 page not found가 발생하는 버그.

- 1. 새로고침 수정
     우선 pathname이 / 에서 /홍길동 처럼 바뀐 상태에서 새로고침을 하면 page not found 404가 나왔던 버그는 netlify에서도 유명한 버그?라고 보면 될 것 같다. 해결 방법은 root 경로에 netlify.toml 파일을 만든 후 리다이렉트를 설정하면 된다. 나 같은 경우에는

[[redirects]]
from = "/\*"
to = "/index.html"
status = 200

이런 식으로 index.html과 관련된 모든 것들에 상태를 200으로 설정해두었다. 결과는 이제 어바웃 페이지나 프로젝트 페이지에서 새로고침을 한다고 하더라도 page not found는 발생하지 않는다.
